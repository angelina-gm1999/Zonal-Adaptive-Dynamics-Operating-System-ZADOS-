Development log: Neurochemical Layer architectural definition and implementation plan

Date: 13 January 2026

Work this session focused on tightening the internal specification of the neurochemical layer and translating that specification into a concrete, staged architectural plan for implementation. The first step was to correct and stabilize the mathematical definition of the kinetic core in the consolidated PDF. The stochastic dynamics are now consistently treated as genuine SDEs with Brownian noise, with Euler–Maruyama integration expressed in a single canonical form. All discrete updates for neurotransmitter concentration use a drift term μ(C, t) multiplied by Δt and a diffusion term σ(C, t) multiplied by √Δt with a unit-variance Gaussian increment, removing earlier inconsistencies where noise had been scaled by Δt in some explanatory sections. The dopamine example is aligned to this convention: concentration evolves according to a release drive minus an aggregated loss term (reuptake, diffusion, degradation), plus multiplicative noise whose amplitude depends on concentration and is scaled with √Δt. Stability notes were updated to explicitly state the variance scaling requirement, and the numerical integration text no longer contains broken edits or residual tool markers.

The neurochemical state specification itself was consolidated around a single authoritative Appendix B.2. The state for each neurotransmitter NT_i is captured as a total synaptic concentration C_i(t) together with a tonic and phasic decomposition C_i^{tonic}(t) and C_i^{phasic}(t), plus a set of kinetic parameters that govern its evolution: release probability p_{r,i}, reuptake coefficient k_{u,i} with efficiency modifier η_{u,i}, diffusion/spillover constant k_{d,i}, and degradation/clearance rate k_{c,i}. Redundant and partially overlapping B.2 variants were merged into one coherent description, and stray merge artefacts and duplicated headers were removed. The result is a single source of truth for neurochemical state variables that is compatible with the existing receptor, oscillation, and neurosymbolic appendices.

On top of this corrected specification, an explicit architectural decomposition for the neurochem package was defined. The layer is organized into orthogonal subsystems: core orchestration, state containers, kinetics, stochastic integration, receptor dynamics, oscillatory modulation, neurosymbolic readout, configuration, and testing. The core module (core/) houses the main simulation controller, optional scheduler logic for timestep or event management, ports for interfacing with reward or higher-level agent systems, and a registry responsible for holding the set of active neurotransmitters, receptor families, and oscillation processes. This registry is the central lookup point that allows the simulator to step all configured transmitters and their receptors in a uniform way.

State is handled by a dedicated state/ layer, which introduces explicit dataclasses (or equivalent structures) for NeurotransmitterState, ReceptorState, and OscillationState. NeurotransmitterState encapsulates the tonic and phasic components of C_i(t) together with the kinetic parameters p_{r,i}, k_{u,i}, η_{u,i}, k_{d,i}, and k_{c,i}, and optional slow variables such as fatigue or transporter downregulation fields. ReceptorState stores densities, affinities, and Markov state allocations for receptor families (e.g., active, desensitized, internalized, upregulated). OscillationState tracks the envelope amplitudes and phases of the modeled bands (δ, θ, α, β, γ) and any cross-frequency coupling variables used in modulation. This structure makes the “what is the system state” question independent of the specific kinetics or integration logic.

Neurotransmitter-specific logic is grouped in a neurotransmitters/ package. A base interface defines how a transmitter exposes its release drive construction and how it connects to the shared kinetics and stochastic layers. Concrete modules for dopamine, serotonin, acetylcholine, norepinephrine, oxytocin, and others follow a common pattern: they do not implement their own integrators, but instead call the kinetic and stochastic utilities with their transmitter-specific parameter bindings. The existing dopamine implementation from earlier work is intended to be moved into this package and wrapped around the new state and solver abstractions.

Kinetic equations are concentrated in a kinetics/ package (replacing the earlier dynamics/). A mass_balance module computes the deterministic drift μ_i(C_i, t) from release drives and loss terms, using the common B.2 parameters. A release_drives module computes r_i(t) from evaluation-like inputs (novelty, reward prediction error, baseline tone, and future social or contextual inputs) and applies tonic versus phasic decomposition as specified in the document. A fatigue module updates slow variables that downregulate reuptake or release based on sustained activity. A plasticity module can be used to capture any clearance- or transport-related adaptations that evolve on slower timescales, separated from receptor plasticity. Together, these modules implement Appendix C’s kinetic layer in a form that can be reused for each neurotransmitter with different parameter sets.

The stochastic integration and noise modeling are handled by a stochastic/ package. Euler–Maruyama integration is implemented in a dedicated euler_maruyama module as a simple, explicit step function that accepts current concentration, drift μ, noise amplitude σ, timestep Δt, and a random number generator, and returns the updated concentration. A noise_models module defines transmitter-specific σ_i(C, t) functions, such as multiplicative square-root noise for dopamine, with parameters drawn from configuration. A seeds module provides RNG stream management so different runs can be controlled and reproduced. This isolates all SDE-specific details behind a small, inspectable interface.

Receptor dynamics sit in a receptors/ package, with a base module that defines a general receptor API (binding from NT concentration to occupancy or activation signals, and state transition updates) and subtype-specific modules for dopamine receptors, serotonin receptors, oxytocin receptors, and others. Receptor plasticity rules (desensitization, internalization, upregulation, tolerance) are implemented in a receptors/plasticity module so that receptor state evolution is parametrized and can be shared where the same mechanisms apply across families. ReceptorState objects from the state layer provide storage; per-timestep updates operate on these while reading the current NT concentrations produced by the kinetic and stochastic steps.

Oscillatory modulation is implemented as its own oscillations/ package. A bands module generates band-limited envelopes or normalized oscillatory signals for the modeled frequency bands; a coupling module implements cross-frequency coupling relationships (for example θ–γ or α–β interactions) and provides a small set of modulation signals (φ_k and composite terms) that can be passed to kinetic and receptor modules. OscillationState tracks the current values of these signals over time. The architectural rule is that neither neurotransmitter modules nor receptors compute oscillations internally; they accept oscillatory fields as input and scale or bias their parameters accordingly.

A neurosymbolic/ package provides the bridge from low-level chemistry and receptors to the higher-level control and evaluation systems. Within this package, a tags module defines a naming scheme for tonic and phasic transmitter quantities and for receptor activation summaries, aligned with the neurosymbolic notation in the document. A metrics module computes internal metrics such as motivation, empathy, cognitive rigidity, and fatigue as algebraic combinations of transmitter concentrations, receptor states, and oscillatory amplitudes. A readout module exposes a single function or small API surface that takes the full neurochemical + receptor + oscillation state and returns a dictionary or structured object of neurosymbolic metrics. This output is what the inference_matrix and domain-level modules consume, so that they never depend directly on raw concentrations or SDE details.

Existing higher-order components (inference_matrix/ and domains/) remain conceptually the same but are now explicitly positioned downstream of neurosymbolic/readout. The inference_matrix modules (ethics, logic, creativity, relational and others) operate on neurosymbolic metrics and internal evaluation structures rather than directly on neurochemical levels. The domains/ modules implement macro-domain behaviors (ethics, creativity, logic, relational reasoning) that use the metrics as modulators or context, preserving a clear separation between substrate and policy.

Configuration is centralized in a config/ package. Parameters can be provided in a programmatic params.py file and in structured configuration files, such as neurotransmitters.yaml for kinetic and noise parameters per transmitter, receptors.yaml for receptor densities and affinities and plasticity rates, oscillations.yaml for band properties and coupling strengths, and neurosymbolic.yaml for the weights and coefficients used in metric definitions. This keeps tuning and experimentation decoupled from implementation. Utilities for logging, visualization, validation, and random helpers live in utils/, and a tests/ package is planned to hold unit and integration tests for dopamine, general kinetics, receptors, oscillations, neurosymbolic metrics, and end-to-end flows.

Finally, a staged implementation plan was defined so that the existing dopamine prototype can be migrated into this architecture without losing working behavior. The plan starts with creating the new directories and stub modules while keeping the current dopamine code operational, then introduces the unified NeurotransmitterState representation and refactors dopamine and the simulation engine to use it. The Euler–Maruyama integrator and noise models are then factored into the stochastic package and wired into the dopamine module. After that, kinetic logic (mass balance and release drives) is moved into the kinetics package so neurotransmitter modules become thin adapters. A core registry is introduced so the simulation loop can iterate across transmitters in a generic way even if only dopamine is initially registered. Oscillations are then implemented and connected to release and kinetic parameters, followed by receptor state and receptor dynamics modules, which are updated each timestep based on the current concentrations. The neurosymbolic tags, metrics, and readout are built on top of this, providing stable high-level signals to the inference and domain modules. Additional transmitters and receptor families can then be added using the same scaffold, and finally the inference_matrix and domain modules are updated so they consume only neurosymbolic readouts from the neurochemical layer.

At the end of this session, the neurochemical layer has a corrected and internally consistent mathematical specification and a concrete architectural blueprint. The design specifies where each element of the PDF (state variables, kinetic equations, stochastic integration, receptors, oscillations, derived metrics) lives in the codebase and outlines a sequential refactoring and implementation plan that preserves the existing dopamine SDE behavior while scaling toward a multi-transmitter, receptor-aware, oscillation-modulated neuromodulatory substrate with a clean neurosymbolic interface.
